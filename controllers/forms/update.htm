<?php Block::put('breadcrumb') ?>
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="<?= Backend::url('saadahsan/callbackform/forms') ?>">Forms</a></li>
        <li class="breadcrumb-item active" aria-current="page"><?= e($formModel->name) ?></li>
    </ol>
<?php Block::endPut() ?>

<?= Form::open(['class' => 'layout']) ?>

    <div class="layout-row">
        <?= $this->formRender() ?>
    </div>

    <div class="form-buttons">
        <div class="loading-indicator-container">
            <button
                type="submit"
                data-request="onSave"
                data-request-data="close:true"
                data-hotkey="ctrl+s, cmd+s"
                data-load-indicator="Saving Form..."
                class="btn btn-primary">
                Save
            </button>
            <button
                type="button"
                data-request="onSave"
                data-request-data="redirect:0"
                data-load-indicator="Saving Form..."
                class="btn btn-default">
                Save and Close
            </button>
            <a
                href="<?= Backend::url('saadahsan/callbackform/submissions?form=' . $formModel->id) ?>"
                class="btn btn-secondary oc-icon-list">
                View Submissions (<?= $formModel->submissions->count() ?>)
            </a>
            <button
                type="button"
                class="oc-icon-trash btn btn-danger pull-right"
                data-request="onDelete"
                data-request-confirm="Are you sure? This will delete all submissions too."
                data-load-indicator="Deleting Form...">
                Delete
            </button>
            <span class="btn-text">
                or <a href="<?= Backend::url('saadahsan/callbackform/forms') ?>">Cancel</a>
            </span>
        </div>
    </div>

<?= Form::close() ?>

<div class="callout callout-info" style="margin-top: 20px;">
    <div class="header">
        <i class="icon-code"></i>
        <h3>Usage</h3>
    </div>
    <div class="content">
        <p>Add this component to your page or layout:</p>
        <pre style="background: #f5f5f5; padding: 10px; border-radius: 4px;">[callBackForm]
formCode = "<?= e($formModel->code) ?>"</pre>
        <p style="margin-top: 10px;">Then render it with:</p>
        <pre style="background: #f5f5f5; padding: 10px; border-radius: 4px;">{% component 'callBackForm' %}</pre>
    </div>
</div>
